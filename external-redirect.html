<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <title>Production Redirect v150</title>
  <style>
    html, body { margin:0; padding:0; width:100%; height:100%; background:#000; color:#0f0; }
    .banner { width:320px; height:50px; display:flex; align-items:center; justify-content:center; font:12px/1.2 sans-serif; }
    .row { display:flex; gap:8px; }
    a { color:#0f0; text-decoration:underline; }
    .sr-only { position:absolute; width:1px; height:1px; overflow:hidden; clip:rect(0,0,0,0); }
  </style>
  <!-- Passive meta refresh attempt using MRAID scheme (some SDKs intercept) -->
  <meta http-equiv="refresh" content="9;url=mraid://open?url=intent://www.google.com#Intent;scheme=https;action=android.intent.action.VIEW;S.browser_fallback_url=https://www.google.com;end">
</head>
<body>
  <div class="sr-only">Controller</div>
  <div class="banner">
    <div class="row">
      <a href="#" id="tap1">mraid‚Üímarket</a>
      <a href="#" id="tap2">mraid‚Üíintent</a>
      <a href="#" id="tap3">_blank</a>
    </div>
  </div>

  <script>
    (function(){
      const TAG = '[VUNGLE-CLICK]';
      console.log(TAG, 'üéØ PRODUCTION REDIRECT v150 LOADED!');

      const INTENT = 'intent://www.google.com#Intent;scheme=https;action=android.intent.action.VIEW;S.browser_fallback_url=https://www.google.com;end';
      const MARKET = 'market://details?id=com.android.chrome';
      
      function tryNav(url, label){
        console.log(TAG, 'üöÄ Attempt ‚Üí', label, url);
        try { window.location.href = url; } catch(e){ console.log(TAG, '‚ùå', label, String(e)); }
      }

      function tryMraidOpen(targetUrl, label){
        const mraidUrl = 'mraid://open?url=' + encodeURIComponent(targetUrl);
        tryNav(mraidUrl, 'mraid.open ' + label);
      }

      // Visibility diagnostics
      window.addEventListener('beforeunload', () => console.log(TAG, '‚ö° BEFORE UNLOAD - NAVIGATION TRIGGERED'));
      window.addEventListener('pagehide', () => console.log(TAG, 'üéâ PAGE HIDE - POSSIBLE EXTERNAL LAUNCH'));
      document.addEventListener('visibilitychange', () => console.log(TAG, 'üëÅÔ∏è VISIBILITY:', document.visibilityState));

      // Manual small taps in 320x50
      document.getElementById('tap1').addEventListener('click', function(e){ e.preventDefault(); tryMraidOpen(MARKET, 'market'); });
      document.getElementById('tap2').addEventListener('click', function(e){ e.preventDefault(); tryMraidOpen(INTENT, 'intent'); });
      document.getElementById('tap3').addEventListener('click', function(e){
        e.preventDefault();
        console.log(TAG, 'ü™ü window.open _blank ‚Üí https://www.google.com');
        try {
          const w = window.open('https://www.google.com', '_blank');
          if (!w) console.log(TAG, '‚ö†Ô∏è window.open blocked');
        } catch (err) { console.log(TAG, '‚ùå window.open exception', String(err)); }
      });

      // Auto sequence (spaced, one-shot style). Targets SDK intercepts:
      // 1) mraid://open?url=market://... (Play intent path)
      // 2) mraid://open?url=intent://... (implicit VIEW)
      // 3) window.open('_blank') https (some SDKs hand off _blank to external)
      setTimeout(() => { tryMraidOpen(MARKET, 'market'); }, 900);
      setTimeout(() => { tryMraidOpen(INTENT, 'intent'); }, 2400);
      setTimeout(() => {
        console.log(TAG, 'ü™ü Auto _blank attempt');
        try { window.open('https://www.google.com', '_blank'); } catch(e) { console.log(TAG, '‚ùå _blank exception', String(e)); }
      }, 3900);
    })();
  </script>
</body>
</html>

